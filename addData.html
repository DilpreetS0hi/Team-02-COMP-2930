<!DOCTYPE html>
<html lang="en">
<head>
    
    <script src="https://www.gstatic.com/firebasejs/6.0.1/firebase.js"></script>
<script>
  // Initialize Firebase
  var config = {
    apiKey: "AIzaSyC3rK5fG2PwqAtjTQ2FhOCyzb4dIcXN2_0",
    authDomain: "project-2930.firebaseapp.com",
    databaseURL: "https://project-2930.firebaseio.com",
    projectId: "project-2930",
    storageBucket: "project-2930.appspot.com",
    messagingSenderId: "16612303844"
  };
  firebase.initializeApp(config);
</script>
    
    <meta charset="utf-8">
    <title>post page</title>
     <link rel="stylesheet" href="add_data.css">
    <link rel="stylesheet" type="text/css" href="signin.css">
    <style>
    /* Style inputs, select elements and textareas */
input[type=text], select, textarea{
  width: 100%;
  padding: 12px;
  border: 1px solid #ccc;
  border-radius: 4px;
  box-sizing: border-box;
  resize: vertical;
    margin-left: 5px;
}
        
        input[type=number], select, textarea{
  width: 100%;
  padding: 12px;
  border: 1px solid #ccc;
  border-radius: 4px;
  box-sizing: border-box;
  resize: vertical;
    margin-left: 5px;
}
        
        div#ex1 {
  margin-top: -383px;
    float: right;
    background-color: rgb(221, 222, 218);
    width: 850px;
    height: 92%;
    overflow-y: scroll;
    overflow-x: hidden;
            word-wrap: break-word;
    margin-right: 13px;

}
        #submit{
        margin-left: 30%;
        margin-top: 0.7%;
        }
        #citySubmitButton{
            
            height: 50px;
            width: 90px;
            font-size: 20px;
        }
/* Style the label to display next to the inputs */
label {
  padding: 12px 12px 12px 0;
  display: inline-block;
    margin-top: 10px;
    margin-left: 13px;
    
}

/* Style the submit button */
input[type=submit] {
  background-color: #4CAF50;
  color: white;
  padding: 12px 20px;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  float: left;
    margin-left: 500px;
}

        #email{
            
        }
/* Style the container */
.container {
  border-radius: 5px;
  background-color: #f2f2f2;
  padding: 20px;
    height: 524px;
}

/* Floating column for labels: 25% width */
.col-25 {
  float: left;
  width: 6%;
  margin-top: 6px;
}

/* Floating column for inputs: 75% width */
.col-75 {
  float: left;
  width: 34%;
  margin-top: 18px;
}

/* Clear floats after the columns */
.row:after {
  content: "";
  display: table;
  clear: both;
}

/* Responsive layout - when the screen is less than 600px wide, make the two columns stack on top of each other instead of next to each other */
@media screen and (max-width: 600px) {
  .col-25, .col-75, input[type=submit] {
    width: 100%;
    margin-top: 0;
  }
}
    </style>
    </head>
    <body>
        <div id="container">
            <nav>
                  <input type="checkbox" id="nav" class="hidden">
                  <label for="nav" class="nav-btn">
                        <i></i>
                        <i></i>
                        <i></i>
                  </label>
                  <div class="logo">
                        <a href="#">
                            <img src="icon3.png" alt="logo" height="60px" bottom="10px"/>
                            <div id="logotext"></div>
                      </a>
                  </div>
                
                
                
                <script src="setup_firebase_yourname.js"></script>

                <h1 id="banner"> </h1>
                <h1 id="quote"> </h1>
                
                <script src="greetingQuote.js"></script> 

                  <div class="nav-wrapper">
                        <ul>
                              <li><a href="#">Home</a></li>
                              <li><a href="#">Expiry</a></li>
                              <li><a href="#">Donate</a></li>
                              <li><a href="#">Info</a></li>
                            <div id="marge"></div>
                        </ul>
                  </div>
            </nav>
      </div>
      
        <div class="container">
  <form action="action_page.php">
    <div class="row">
      <div class="col-25">
          <div id="email">
        <label for="email">E-mail</label>
          </div>
      </div>
      <div class="col-75">
        <input type="text" id="email2" name="E-mail" readonly>
      </div>
    </div>
    <div class="row">
      <div class="col-25">
        <label for="Contact">Contact</label>
      </div>
      <div class="col-75">
        <input type="number" id="Contact" name="Contact" required="required" placeholder="Your number...">
      </div>
    </div>
    <div class="row">
      <div class="col-25">
        <label for="Post">Post</label>
      </div>
      <div class="col-75">
        <textarea id="Post" name="Post" required="required" placeholder="Write something.." style="height:200px"></textarea>
      </div>
    </div>
    <div class="row" id="submit">
        <button onclick="submitCityClick(); return false;" id="citySubmitButton">Submit</button>
    </div>
      <div id="ex1"></div>
  </form>
</div>
     
     <footer class="footer-distributed" id="contact">
    	<div class="footer-left">
            <h1><span>No</span> FOOD <span>Wastage</span></h1>
				<p class="footer-company-name" id="abc123"></p>
			</div>
			<div class="footer-center">
				<div>
                    <p>Address: 3700 Willingdon Ave Burnaby, Bc</p>
				</div>
                <br>
				<div>
					<p>Phone: 604-727-3019</p>
				</div>
                <br>
				<div>
					<p><a href="mailto:foodlife@company.com">Email: foodlife@company.com</a></p>
				</div>
			</div>
			<div class="footer-right">
				<p class="footer-company-about">
					<span>About Us</span>
					Need an Notification Alerts for Expiry foods? Have Queries? Call us!
                    We help people to reduce Food Wastage by generating emergency alerts  
                    and provide them with suitable information for overripe eatables and help them Donate food to needy people.
				</p>
			</div>
		</footer>
      
    <script>
var contact = document.getElementById('Contact');
var post = document.getElementById('Post');
var names;
var citySubmitButton = document.getElementById('citySubmitButton');
        function submitCityClick(){
  var firebaseRef = firebase.database().ref();  
    var d = new Date();
    var months = ["January","February","March","April","May","June","July","August",
                  "September","October","November","December"];
    var date = d.getDate() + " " + months[d.getMonth()] + " " + d.getFullYear();
    firebase.auth().onAuthStateChanged(function(user){
    	if (user){
    var user1 =  user.email;
    var user2 = contact.value;
    var user3 = post.value;
    names = user.displayName;
    firebaseRef.child("Post").push().set({
       email: user1,
        contact: user2,
        post: user3,
        name: names,
        dates: date
    })
        }})
    document.getElementById('Contact').innerHTML="";
        };
        
    var ref = firebase.database().ref('Post');

ref.on("child_added", function(snapshot) {
    var contact = snapshot.val().contact;
    var email = snapshot.val().email;
    var posts = snapshot.val().post;
    var name = snapshot.val().name;
    var namediv = document.createElement('div');
    namediv.innerHTML=name;
    namediv.style.fontSize = "35px";
    namediv.style.marginLeft = '2%';
    namediv.style.color = getRandomColor();
    var contactdiv = document.createElement('div');
    contactdiv.innerHTML=contact;
    contactdiv.style.color="grey";
    contactdiv.style.marginTop= "-4%";
    contactdiv.style.marginRight= "2%";
    contactdiv.style.float="right";
    var emaildiv = document.createElement('div');
    emaildiv.style.color="grey";
    emaildiv.style.float="right";
    emaildiv.style.marginTop= "-1.5%";
    emaildiv.style.marginRight= "2%";
    emaildiv.innerHTML=email;
    var postdiv = document.createElement('div');
    postdiv.innerHTML=posts;
    postdiv.style.margin = "2.5%";
    var post = document.createElement('div');
    post.setAttribute('class','posts');
    post.style.background = 'white';
    post.style.marginTop = '2%';
    post.style.marginLeft = '2%';
    post.style.marginRight = "2%";
    post.style.borderRadius = '10px';
    var datediv = document.createElement('div');
    datediv.innerHTML = snapshot.val().dates;
    datediv.style.color = "grey";
    datediv.style.marginTop = "-3%";
    datediv.style.marginRight = "2.5%";
    datediv.style.float = "right";
    var linebreak = document.createElement("br");
    var separatediv = document.createElement('div');
    separatediv.append(postdiv, linebreak, datediv);
    separatediv.setAttribute('class','separate');
    document.getElementById('ex1').prepend(post);
    post.append(namediv,contactdiv, emaildiv, separatediv);
    
}, function (error) {
   console.log("Error: " + error.code);
});
        function getRandomColor() {
  var letters = '0123456789ABCDEF';
  var color = '#';
  for (var i = 0; i < 6; i++) {
    color += letters[Math.floor(Math.random() * 16)];
  }
  return color;
            console.log(color);
}
        
        
        var uiConfig = {
            callbacks: {
                signInSuccessWithAuthResult: function(authResult, redirectUrl) {
                    // User successfully signed in.
                    // Return type determines whether we continue the redirect automatically
                    // or whether we leave that to developer to handle.
                    return true;
                },
                uiShown: function() {
                    // The widget is rendered.
                    // Hide the loader.
                    document.getElementById('loader').style.display = 'none';
                }
            },
            // Will use popup for IDP Providers sign-in flow instead of the default, redirect.
            signInFlow: 'popup',
            signInSuccessUrl: 'tryMe.html',
            signInOptions: [
                // Leave the lines as is for the providers you want to offer your users.


                firebase.auth.EmailAuthProvider.PROVIDER_ID
            ],
            // Terms of service url.
            tosUrl: 'tryMe.html',
            // Privacy policy url.
            privacyPolicyUrl: 'tryMe.html'
        };

    </script>

        
    
    
    
    </body>
</html>